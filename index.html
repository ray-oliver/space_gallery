<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Design Gallery - ŸÖÿπÿ±ÿ∂ ÿ™ÿµÿßŸÖŸäŸÖ ÿßŸÑŸÅÿ∂ÿßÿ°</title>
    <style>
 
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }


body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: url('https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
  background-size: cover;
  min-height: 100vh;
  padding: 40px 20px;
  color: #f0f0f5;
  direction: ltr;
  position: relative;
  overflow-x: hidden;
}

body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(10, 10, 30, 0.7);
  backdrop-filter: blur(6px);
  z-index: -1;
}

body.rtl {
  direction: rtl;
}

.container {
  max-width: 1100px;
  margin: 0 auto;
  background: rgba(25, 25, 45, 0.75);
  border-radius: 20px;
  padding: 30px 35px;
  box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
  border: 1px solid rgba(100, 100, 255, 0.3);
}

.header {
  text-align: center;
  margin-bottom: 35px;
  position: relative;
}

.lang-switch {
  position: absolute;
  top: 0;
  right: 0;
  background: linear-gradient(135deg, #6a5acd, #483d8b);
  color: white;
  border: none;
  padding: 10px 22px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 14px;
  transition: 0.3s;
  box-shadow: 0 0 10px rgba(106, 90, 205, 0.5);
}

body.rtl .lang-switch {
  right: auto;
  left: 0;
}

.lang-switch:hover {
  transform: scale(1.05);
  background: linear-gradient(135deg, #7f73ff, #5c4dc5);
  box-shadow: 0 0 20px rgba(120, 110, 255, 0.7);
}

h1 {
  font-size: 2.5em;
  background: linear-gradient(90deg, #a1c4fd, #c2e9fb);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 10px;
  letter-spacing: 1px;
}

.subtitle {
  color: #c9c9e2;
  font-size: 1.1em;
}

.upload-section {
  background: rgba(40, 40, 80, 0.6);
  padding: 25px 30px;
  border-radius: 15px;
  margin-bottom: 30px;
  border: 1px solid rgba(100, 100, 255, 0.3);
}

.upload-section h2 {
  color: #cdd6ff;
  margin-bottom: 20px;
  text-shadow: 0 0 8px rgba(160, 180, 255, 0.4);
}

.form-group {
  margin-bottom: 18px;
}

label {
  margin-bottom: 8px;
  font-weight: 600;
  font-size: 1.1em;
  color: #dbe0ff;
}


        
    </style>
</head>
<body>
      </style>
</head>
<body>
    <script>
        // !!! CHANGE THIS TO YOUR SECRET PASSWORD !!!
        var accessPassword = "NebulaWhisper_Gamma9"; 

        (function promptPass() {
            var psw = prompt("Enter the Secret Access Code for the Space Design Gallery:");
            // This loop forces the user to try again if the password is wrong
            while (psw !== accessPassword) {
                alert("Incorrect Access Code. Please try again.");
                // Return and call itself again to re-prompt
                return promptPass(); 
            }
        }());
        // The script finishes, and the page loads ONLY after the correct password is entered.
    </script>
    <div class="container">
        <div class="header">
            <button class="lang-switch" onclick="toggleLanguage()">
                <span id="langText">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
            </button>
    <div class="container">
        <div class="header">
            <button class="lang-switch" onclick="toggleLanguage()">
                <span id="langText">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
            </button>
            <h1 id="mainTitle">Space Design Gallery</h1>
            <p class="subtitle" id="subtitle">Share and discover amazing space designs</p>
            <div class="status-indicator status-offline" id="statusIndicator">
                <span id="statusText">Connecting...</span>
            </div>
        </div>

        <div class="upload-section">
            <h2 id="uploadTitle" style="margin-bottom: 20px;">Upload Your Design</h2>
            <form class="upload-form" onsubmit="addDesign(event)">
                <div class="form-group">
                    <label for="designName" id="nameLabel">Design Name</label>
                    <input type="text" id="designName" required placeholder="Enter design name">
                </div>
                <div class="form-group">
                    <label for="designImage" id="imageLabel">Design Image</label>
                    <input type="file" id="designImage" accept="image/*" required>
                </div>
                <button type="submit" class="upload-btn" id="uploadBtn">Add Design</button>
            </form>
        </div>

        <div class="search-section">
            <input type="text" class="search-box" id="searchBox" placeholder="Search designs..." oninput="searchDesigns()">
        </div>

        <div class="gallery" id="gallery">
            <div class="loading">
                <div class="spinner"></div>
                <p>Loading designs...</p>
            </div>
        </div>
    </div>

    <script type="module">
        // Firebase configuration
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, push, onValue, remove } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        // REPLACE THIS CONFIG WITH YOUR OWN FROM FIREBASE CONSOLE
       const firebaseConfig = {
  apiKey: "AIzaSyA6dmYj_sz8evsFgPVu5RBPFceeC03mw5c",
  authDomain: "space-gallery-e58f3.firebaseapp.com",
  databaseURL: "https://space-gallery-e58f3-default-rtdb.firebaseio.com",
  projectId: "space-gallery-e58f3",
  storageBucket: "space-gallery-e58f3.firebasestorage.app",
  messagingSenderId: "325992713811",
  appId: "1:325992713811:web:900a04a41575346dab00a6",
  measurementId: "G-5RH3KHVGSF"
};
firebase.initializeApp(firebaseConfig);


        // REPLACE WITH YOUR CLOUDINARY CLOUD NAME AND UPLOAD PRESET
        const CLOUDINARY_CLOUD_NAME = "dle1jyerd";
        const CLOUDINARY_UPLOAD_PRESET = "Space_Gallery";

        let app, database;
        let isConnected = false;

        try {
            app = initializeApp(firebaseConfig);
            database = getDatabase(app);
            isConnected = true;
            updateStatus(true);
            loadDesigns();
        } catch (error) {
            console.error('Firebase initialization error:', error);
            updateStatus(false);
            showOfflineMessage();
        }

        const translations = {
            en: {
                mainTitle: "Space Design Gallery",
                subtitle: "Share and discover amazing space designs",
                uploadTitle: "Upload Your Design",
                nameLabel: "Design Name",
                imageLabel: "Design Image",
                uploadBtn: "Add Design",
                uploadingBtn: "Uploading...",
                searchPlaceholder: "Search designs...",
                langText: "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",
                noResults: "No designs found",
                noDesigns: "No designs yet. Be the first to upload!",
                statusOnline: "üü¢ Connected",
                statusOffline: "üî¥ Offline",
                deleteConfirm: "Delete this design?",
                deleteBtn: "Delete"
            },
            ar: {
                mainTitle: "ŸÖÿπÿ±ÿ∂ ÿ™ÿµÿßŸÖŸäŸÖ ÿßŸÑŸÅÿ∂ÿßÿ°",
                subtitle: "ÿ¥ÿßÿ±ŸÉ ŸàÿßŸÉÿ™ÿ¥ŸÅ ÿ™ÿµÿßŸÖŸäŸÖ ŸÅÿ∂ÿßÿ¶Ÿäÿ© ŸÖÿ∞ŸáŸÑÿ©",
                uploadTitle: "ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ÿµŸÖŸäŸÖŸÉ",
                nameLabel: "ÿßÿ≥ŸÖ ÿßŸÑÿ™ÿµŸÖŸäŸÖ",
                imageLabel: "ÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿµŸÖŸäŸÖ",
                uploadBtn: "ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ™ÿµŸÖŸäŸÖ",
                uploadingBtn: "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...",
                searchPlaceholder: "ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑÿ™ÿµÿßŸÖŸäŸÖ...",
                langText: "English",
                noResults: "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ™ÿµÿßŸÖŸäŸÖ",
                noDesigns: "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿµÿßŸÖŸäŸÖ ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ. ŸÉŸÜ ÿ£ŸàŸÑ ŸÖŸÜ Ÿäÿ≠ŸÖŸëŸÑ!",
                statusOnline: "üü¢ ŸÖÿ™ÿµŸÑ",
                statusOffline: "üî¥ ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ",
                deleteConfirm: "ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ™ÿµŸÖŸäŸÖÿü",
                deleteBtn: "ÿ≠ÿ∞ŸÅ"
            }
        };

        let currentLang = 'en';
        let allDesigns = [];

        function updateStatus(online) {
            const indicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            
            if (online) {
                indicator.className = 'status-indicator status-online';
                statusText.textContent = translations[currentLang].statusOnline;
            } else {
                indicator.className = 'status-indicator status-offline';
                statusText.textContent = translations[currentLang].statusOffline;
            }
        }

        window.toggleLanguage = function() {
            currentLang = currentLang === 'en' ? 'ar' : 'en';
            document.body.classList.toggle('rtl');
            updateTexts();
            updateStatus(isConnected);
        }

        function updateTexts() {
            const t = translations[currentLang];
            document.getElementById('mainTitle').textContent = t.mainTitle;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('uploadTitle').textContent = t.uploadTitle;
            document.getElementById('nameLabel').textContent = t.nameLabel;
            document.getElementById('imageLabel').textContent = t.imageLabel;
            
            const uploadBtn = document.getElementById('uploadBtn');
            if (!uploadBtn.disabled) {
                uploadBtn.textContent = t.uploadBtn;
            }
            
            document.getElementById('searchBox').placeholder = t.searchPlaceholder;
            document.getElementById('langText').textContent = t.langText;
        }

        function loadDesigns() {
            if (!isConnected) return;

            const designsRef = ref(database, 'designs');
            onValue(designsRef, (snapshot) => {
                allDesigns = [];
                snapshot.forEach((childSnapshot) => {
                    const design = childSnapshot.val();
                    design.id = childSnapshot.key;
                    allDesigns.unshift(design);
                });
                
                const searchTerm = document.getElementById('searchBox').value;
                if (searchTerm) {
                    searchDesigns();
                } else {
                    displayDesigns(allDesigns);
                }
            }, (error) => {
                console.error('Error loading designs:', error);
                showOfflineMessage();
            });
        }

        async function uploadToCloudinary(file) {
            const formData = new FormData();
            formData.append('file', file);
            formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
            formData.append('cloud_name', CLOUDINARY_CLOUD_NAME);

            const response = await fetch(
                `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`,
                {
                    method: 'POST',
                    body: formData
                }
            );

            if (!response.ok) {
                throw new Error('Upload failed');
            }

            const data = await response.json();
            return data.secure_url;
        }

        window.addDesign = async function(e) {
            e.preventDefault();
            
            if (!isConnected) {
                alert(currentLang === 'en' ? 'Cannot upload. Not connected to server.' : 'ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ. ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ.');
                return;
            }

            const uploadBtn = document.getElementById('uploadBtn');
            const t = translations[currentLang];
            
            uploadBtn.disabled = true;
            uploadBtn.textContent = t.uploadingBtn;
            
            const name = document.getElementById('designName').value;
            const fileInput = document.getElementById('designImage');
            const file = fileInput.files[0];

            if (!file) return;

            try {
                // Upload image to Cloudinary
                const imageUrl = await uploadToCloudinary(file);

                // Save design data to Firebase Database
                const designsRef = ref(database, 'designs');
                await push(designsRef, {
                    name: name,
                    imageUrl: imageUrl,
                    date: new Date().toLocaleDateString(),
                    timestamp: Date.now()
                });

                // Clear form
                document.getElementById('designName').value = '';
                document.getElementById('designImage').value = '';
                
                uploadBtn.disabled = false;
                uploadBtn.textContent = t.uploadBtn;
            } catch (error) {
                console.error('Error uploading design:', error);
                alert(currentLang === 'en' ? 'Upload failed. Please check your Cloudinary settings.' : 'ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ•ÿπÿØÿßÿØÿßÿ™ Cloudinary.');
                uploadBtn.disabled = false;
                uploadBtn.textContent = t.uploadBtn;
            }
        }

        window.deleteDesign = async function(id) {
            if (!isConnected) return;

            const t = translations[currentLang];
            if (confirm(t.deleteConfirm)) {
                try {
                    const designRef = ref(database, `designs/${id}`);
                    await remove(designRef);
                } catch (error) {
                    console.error('Error deleting design:', error);
                    alert(currentLang === 'en' ? 'Delete failed.' : 'ŸÅÿ¥ŸÑ ÿßŸÑÿ≠ÿ∞ŸÅ.');
                }
            }
        }

        window.searchDesigns = function() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            const filtered = allDesigns.filter(design => 
                design.name.toLowerCase().includes(searchTerm)
            );
            displayDesigns(filtered);
        }

        function displayDesigns(designs) {
            const gallery = document.getElementById('gallery');
            const t = translations[currentLang];
            
            if (designs.length === 0) {
                if (document.getElementById('searchBox').value) {
                    gallery.innerHTML = `
                        <div class="no-results">
                            <div class="emoji">üîç</div>
                            <p>${t.noResults}</p>
                        </div>
                    `;
                } else {
                    gallery.innerHTML = `
                        <div class="no-results">
                            <div class="emoji">üöÄ</div>
                            <p>${t.noDesigns}</p>
                        </div>
                    `;
                }
                return;
            }

            gallery.innerHTML = designs.map(design => `
                <div class="design-card">
                    <img src="${design.imageUrl}" alt="${design.name}" class="design-image" loading="lazy">
                    <div class="design-info">
                        <div class="design-name">${design.name}</div>
                        <div class="design-date">${design.date}</div>
                        <button class="delete-btn" onclick="deleteDesign('${design.id}')">
                            ${t.deleteBtn}
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function showOfflineMessage() {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = `
                <div class="no-results">
                    <div class="emoji">‚ö†Ô∏è</div>
                    <p>${currentLang === 'en' ? 'Please configure Firebase and Cloudinary to enable online features.' : 'Ÿäÿ±ÿ¨Ÿâ ÿ™ŸÉŸàŸäŸÜ Firebase Ÿà Cloudinary ŸÑÿ™ŸÖŸÉŸäŸÜ ÿßŸÑŸÖŸäÿ≤ÿßÿ™ ÿπÿ®ÿ± ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™.'}</p>
                </div>
            `;
        }
    </script>
</body>
</html>